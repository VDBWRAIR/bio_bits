make_pcoa
=======

make_pcoa is used to build an interactive 3D plot for a given fasta alignment file built from 
a Principal Coordinate Analysis (PCoA). The file produced can be opened in a browser for interactive viewing. 

makce_pcoa uses the scikit-bio package to compute the PCoA and the emperor program to create the plot.

Usage
+++++++++++++++++++++++++++


Usage:
    make_pcoa.py <fasta> [--map <mapfile>] [--outdir <DIR>] [--coord <coordfile>]

Options:
    --outdir=<DIR>,-o=<DIR>   Directory to put html file in. [Default: emperor]
    --map=<mapfile>,-m=<mapfile>   TSV file which maps FASTA IDs to metadata. If not supplied one is generated using the FASTA IDs only.
    --coord=<coordfile>,-c=<coordfile>   Coordinate file including distance matrix, defined by Qiime pipeline

Examples:

.. code-block:: bash

    $> make_pcoa tests/testinput/aln1.fasta --map mymap.map  --outdir results

    $> make_pcoa tests/testinput/aln1.fasta  --outdir results

    $> make_pcoa tests/testinput/aln1.fasta  --map mymap.map --coord mycoord.coord


Produces a folder results (named "pcoa" if --outdir is not provided) condaining an index.html file. The plot can be viewed by opening it in the browser:

.. code-block:: bash

    $> firefox pcoa/index.html



Mapping File
+++++++++++++

Mapping files are used to customize the plot (e.g., color grouping) by defining categories for the provided sequences. Mapping files are simple TSV-seperated files which
map FASTA IDs (from the input file e.g. aln1.fasta) to arbitrary categories; i.e. geographic region of sequence, sequencing platform, etc.

Information about mapping files can be found here: `http://qiime.org/documentation/file_formats.html#metadata-mapping-files`_
An example is located here: `http://qiime.org/_static/Examples/File_Formats/Example_Mapping_File.txt`_

In general, a mapping file is suggested to assist in interpreting the data, but if one is not provided, make_pcoa will create one automatically. This auto-generated mapping file will have no categories besides FASTA ID.


Coordinate File
+++++++++++++++

Coordinate files include the data generated by PCoA. In general, make_pcoa should create this file automatically; but the --coord argument can be 
supplied to avoid re-creating a new coordinate file each time (if, for example, a new mapping file is provided with the same alignment). 

NOTE: If a coordinate file is provided, the fasta file is ignored: the coordinate file provides the information to create the plot (unless it is used to auto-generate the mapping file, which will effect metadata only).
